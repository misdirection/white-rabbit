# Idle Game Spec: Space Colony Builder

An incremental/idle game about building a space colony and eventually exploring the universe.

## Overview

The player starts on Earth with nothing but the ability to gather minerals by clicking. Through resource management and building construction, they progress toward the ultimate goal of Phase 1: building a spaceship to begin exploring space.

## Game Phases

### Phase 1: Earth Colony (This Spec)
Build up infrastructure on Earth to construct a spaceship and launch into space.

### Phase 2+: Space Exploration (Future)
Explore the solar system, establish colonies on other planets, discover new resources.

---

## Resources

| Resource | Description | Starting Amount |
|----------|-------------|-----------------|
| **Minerals** | Raw materials gathered by clicking or from mines | 0 |
| **Money** | Currency earned through trading | 0 |
| **Energy** | Power for buildings (production minus consumption) | 0 |
| **Science** | Research points for unlocking technologies | 0 |
| **Spaceship Parts** | Manufactured by Factories, needed for spaceship | 0 |

### Resource Mechanics

- **Minerals**: Base resource. Click to gather 1 mineral. Mines produce minerals passively.
- **Money**: Automatically generated by Trading Posts (consumes minerals). Used to buy buildings and hire scientists.
- **Energy**: Net rate (production minus consumption). Generated by Solar Panels, consumed by buildings. If net energy goes negative, energy-consuming buildings stop producing. No storage cap for now.
- **Science**: Generated by Research Centers. Used to unlock new buildings and upgrades.

---

## Buildings

All building costs scale with the number owned: `baseCost * (1.15 ^ owned)`

### Selling Buildings

- Buildings can be sold/demolished at any time
- **No refund**: Selling does not return any resources (penalty for poor planning)
- Selling reduces the building count, which lowers the cost for the next purchase
- Use case: Shut down resource-consuming buildings (Trading Posts, Mines) when they drain resources faster than desired

### Mine
- **Base Cost**: 10 Minerals
- **Production**: +1 Mineral/second
- **Energy Cost**: 0
- **Unlock**: Available from start

### Trading Post
- **Base Cost**: 50 Minerals
- **Production**: Automatically converts 2 Minerals/second â†’ 1 Money/second
- **Energy Cost**: 0
- **Unlock**: Available from start
- **Note**: Pauses when minerals reach 0, resumes when minerals available

### Solar Panel
- **Base Cost**: 25 Minerals, 10 Money
- **Production**: +2 Energy/second
- **Energy Cost**: 0 (produces energy)
- **Unlock**: Available from start

### Research Center
- **Base Cost**: 100 Minerals, 50 Money
- **Production**: +0.5 Science/second
- **Energy Cost**: 3 Energy/second
- **Unlock**: Requires 1 Solar Panel
- **Special**: First one unlocks the Research Tab (see Research System below)
- **Scaling**: Each Research Center adds +2 max scientists and +1 parallel research slot
  - 1 Research Center: 2 scientists, 1 parallel research
  - 2 Research Centers: 4 scientists, 2 parallel researches
  - 3 Research Centers: 6 scientists, 3 parallel researches
  - etc.

### Factory
- **Base Cost**: 200 Minerals, 100 Money, 10 Science
- **Production**: Produces Spaceship Parts (1 part/10 seconds)
- **Energy Cost**: 5 Energy/second
- **Unlock**: Requires 50 Science

---

## Research System

Unlocked when the first Research Center is built. Opens a new Research Tab in the UI.

### Scientists

- **Hiring Cost**: `50 * (1.5 ^ currentScientists)` Money (scales per hire, one-time cost)
  - 1st scientist: 50 Money
  - 2nd scientist: 75 Money
  - 3rd scientist: 112 Money
  - 4th scientist: 168 Money
  - etc.
- **Max Scientists**: 2 per Research Center owned
- **Function**: Reduce research time (more scientists = faster research)

### Research Time Formula

```
baseTime / (1 + (scientists * 0.5))
```

Example: A 60-second research with 2 scientists takes 60 / (1 + 1) = 30 seconds.

### Parallel Research

- **Slots**: 1 per Research Center owned
- Each slot can run one research at a time
- Scientists are distributed evenly across active researches (e.g., 4 scientists with 2 active = 2 per research)

### Research Costs

- **Science cost paid when research starts** (not on completion)
- If not enough Science, research cannot be started

### Research Tree

Researches have levels. Each level costs more but provides cumulative bonuses.

| Research | Base Cost | Base Time | Bonus per Level | Unlock |
|----------|-----------|-----------|-----------------|--------|
| **Efficient Mining** | 10 Science | 30s | +10% Mine production | Available from start |
| **Solar Efficiency** | 15 Science | 45s | +15% Solar Panel output | Available from start |
| **Advanced Trading** | 20 Science | 60s | +10% Money from trades | Available from start |
| **Factory Automation** | 25 Science | 90s | +20% Spaceship Parts production | Requires 1 Factory |
| **Efficient Researching** | 20 Science | 60s | +10% Science production | Available from start |
| **Scientific Method** | 30 Science | 120s | -10% research time (all researches) | Available from start |

### Level Scaling

- **Cost per level**: `baseCost * (level ^ 1.5)`
- **Time per level**: `baseTime * (level ^ 1.2)`
- **Bonus**: Multiplicative (Level 3 Efficient Mining = 1.1 * 1.1 * 1.1 = 1.331x)

### Research UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RESEARCH TAB                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Scientists: 3/4  [Hire +1 (168$)]                     â”‚
â”‚  Research Slots: 2/2                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ACTIVE RESEARCH                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Efficient Mining Lv.2    [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘] 24s left     â”‚ â”‚
â”‚  â”‚ Solar Efficiency Lv.1    [â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 38s left     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AVAILABLE RESEARCH                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Advanced Trading Lv.1   â”‚ 20 Sci â”‚ 60s â”‚ [START]  â”‚ â”‚
â”‚  â”‚ Factory Automation ğŸ”’   â”‚ Requires Factory         â”‚ â”‚
â”‚  â”‚ Efficient Researching   â”‚ 20 Sci â”‚ 60s â”‚ [START]  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Win Condition (Phase 1)

Build a **Spaceship** to complete Phase 1:

**Spaceship Cost**:
- 1000 Minerals
- 500 Money
- 100 Science
- 50 Spaceship Parts

Upon completion, a launch animation plays and Phase 2 begins (future implementation).

---

## Persistence

Game state saved to **IndexedDB** with the following structure:

```javascript
{
  version: 1,
  lastSaved: timestamp,
  resources: {
    minerals: number,
    money: number,
    energy: number,
    science: number,
    spaceshipParts: number
  },
  buildings: {
    mine: { count: number },
    tradingPost: { count: number },
    solarPanel: { count: number },
    researchCenter: { count: number },
    factory: { count: number }
  },
  stats: {
    totalClicks: number,
    totalMineralsGathered: number,
    playTime: number
  },
  unlocks: {
    researchCenter: boolean,
    factory: boolean,
    spaceship: boolean
  },
  research: {
    scientists: number,
    activeResearches: [
      { id: string, level: number, progress: number, timeRemaining: number }
    ],
    completed: {
      efficientMining: number,      // level achieved
      solarEfficiency: number,
      advancedTrading: number,
      factoryAutomation: number,
      efficientResearching: number,
      scientificMethod: number
    }
  }
}
```

### Save Behavior
- Auto-save every 30 seconds
- Save on tab close/visibility change
- Manual save button
- Offline progress calculation on load
- **Reset button**: Clears all game data and starts fresh (with confirmation dialog)

---

## UI Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RESOURCES BAR                                          â”‚
â”‚  Minerals: 150  $ Money: 45  Energy: +4/s  Science: 5 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚   GATHER    â”‚  â† Big clickable button                â”‚
â”‚  â”‚  MINERALS   â”‚                                        â”‚
â”‚  â”‚    +1 ï¿½ite    â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  BUILDINGS                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Mine (3)           â”‚ +3/s â”‚ Cost: 40 Minerals    â”‚   â”‚
â”‚  â”‚ Trading Post (1)   â”‚ +1$/sâ”‚ -2 Min/s â†’ +1 $/s    â”‚   â”‚
â”‚  â”‚ Solar Panel (2)    â”‚ +4/s â”‚ Cost: 25 Min, 10 $   â”‚   â”‚
â”‚  â”‚ Research Center ğŸ”’ â”‚      â”‚ Requires Solar Panel â”‚   â”‚
â”‚  â”‚ Factory ğŸ”’         â”‚      â”‚ Requires 50 Science  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  SPACESHIP PROGRESS                    [12%] â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ â”‚
â”‚  Minerals: 120/1000 | Money: 45/500 | Science: 5/100   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### UI Components

1. **Resource Bar**: Always visible at top, shows current resources
2. **Gather Button**: Large, satisfying click target with visual feedback
3. **Buildings Panel**: List of buildings with count, production rate, and buy button
4. **Progress Panel**: Shows progress toward spaceship completion

### Opening/Closing

- **Open**: Click on Earth in the 3D view to open the game window
- **Close**: Only via the X button in the window header (no click-away or escape key)
- Window is draggable and remembers position

---

## Technical Architecture

### New Files

```
src/
â”œâ”€â”€ game/
â”‚   â”œâ”€â”€ GameState.js        # State management, IndexedDB persistence
â”‚   â”œâ”€â”€ GameLoop.js         # Tick-based resource generation
â”‚   â”œâ”€â”€ Buildings.js        # Building definitions and logic
â”‚   â”œâ”€â”€ Resources.js        # Resource calculations
â”‚   â””â”€â”€ Unlocks.js          # Unlock condition checks
â”œâ”€â”€ ui/
â”‚   â””â”€â”€ modules/
â”‚       â””â”€â”€ idleGame.js     # UI panel and controls
```

### Integration Points

- Game UI as a collapsible panel in the existing GUI
- Game state independent of simulation state
- Optional: Visual representation of buildings on Earth in the 3D view

---

## Open Questions

1. Should buildings be visible in the 3D simulation view?
2. Exact balance of production rates and costs (needs playtesting)
3. Prestige/reset mechanics for replayability?
4. Integration with space exploration - what happens after launch?

---

## Future Considerations (Phase 2+)

- Multiple planets with different resources
- Space travel time based on actual orbital mechanics
- Asteroid mining
- Research tree for new technologies
- Multiple spaceships / fleet management
